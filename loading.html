<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initializing System...</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { mono: ['Fira Code', 'monospace'] },
                    colors: { neonCyan: '#66fcf1', neonBlue: '#3b82f6' }
                }
            }
        }
    </script>

    <style>
        body {
            background: #000;
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Fira Code', monospace;
            color: #66fcf1;
            flex-direction: column;
            padding: 20px;
            position: relative;
        }

        /* CYBER GRID STYLES */
        :root {
            --grid-color: rgba(59, 130, 246, 0.25);
        }

        html.dark {
            --grid-color: rgba(102, 252, 241, 0.15);
        }

        .cyber-grid {
            position: fixed;
            inset: 0;
            z-index: 0;
            /* FIX: Grid lines are now active on this screen */
            background-image:
                linear-gradient(to right, var(--grid-color) 1px, transparent 1px),
                linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
            background-size: 40px 40px;
            /* Spotlight mask is active and follows mouse on this screen */
            mask-image: radial-gradient(circle at var(--x, 50%) var(--y, 50%), black 0%, transparent 20%);
            -webkit-mask-image: radial-gradient(circle at var(--x, 50%) var(--y, 50%), black 0%, transparent 20%);
            pointer-events: none;
        }

        /* Fixed Terminal Box */
        .terminal-box {
            position: relative;
            /* Ensure it is above the grid */
            z-index: 10;
            width: 90%;
            max-width: 700px;
            height: 500px;
            /* Fixed height */
            border: 1px solid #333;
            background: rgba(10, 10, 10, 0.9);
            box-shadow: 0 0 20px rgba(102, 252, 241, 0.15);
            display: flex;
            flex-direction: column;
        }

        .terminal-header {
            padding: 8px 15px;
            background: rgba(102, 252, 241, 0.1);
            /* Subtle neon header */
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            font-size: 0.75rem;
            color: #ccc;
        }

        .terminal-output {
            flex-grow: 1;
            overflow-y: auto;
            padding: 15px;
            line-height: 1.4;
            font-size: 0.8rem;
        }

        /* Hide Scrollbar for Terminal Output */
        .terminal-output::-webkit-scrollbar {
            display: none;
        }

        .terminal-output {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Status Colors */
        .text-ok {
            color: #10b981;
        }

        /* Emerald Green */
        .text-fail {
            color: #ef4444;
        }

        /* Red */
        .text-warn {
            color: #f59e0b;
        }

        /* Amber */
        .text-info {
            color: #3b82f6;
        }

        /* Blue */
        .text-module {
            color: #8B5CF6;
        }

        /* Purple */
        .text-file {
            color: #66fcf1;
        }

        /* Cyan */

        /* Prompt Styling */
        .prompt {
            color: #27c93f;
            /* Green color for the prompt */
            margin-right: 8px;
            font-weight: bold;
        }

        /* Cursor blink effect */
        .cursor::after {
            content: '|';
            animation: blink 1s step-start infinite;
            color: #66fcf1;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }
    </style>
</head>

<body>

    <div class="cyber-grid"></div>

    <div class="terminal-box">
        <div class="terminal-header">
            <span class="text-neonCyan mr-2">█</span> SYSTEM_INIT_LOG.sh — ZSH
        </div>
        <div class="terminal-output" id="terminal-output">
            <div class="text-info mb-3">Initializing hardware diagnostics...</div>
        </div>
    </div>

    <div class="mt-4 text-xs text-gray-500" id="status-text"></div>


    <script>
        const terminalOutput = document.getElementById('terminal-output');
        const statusText = document.getElementById('status-text');
        const grid = document.querySelector('.cyber-grid');

        const PROMPT_ROOT = '<span class="prompt">root@shashwat:~$</span>';
        const PROMPT_BUILD = '<span class="prompt text-module">[BUILD] ></span>';
        const PROMPT_MAPPER = '<span class="prompt text-info">[MAP] $</span>';

        const sequence = [
            // Phase 1: File System Scan
            { cmd: "fsck -y /root/portfolio", status: "Scanning file integrity..." },
            { log: "Scanning Directory: <span class='text-module'>/assets</span>", delay: 100 },
            { log: "├── <span class='text-file'>fevicon.png</span> ............................................ <span class='text-ok'>[PASS]</span>", delay: 50 },
            { log: "└── <span class='text-file'>profile.jpg</span> ............................................ <span class='text-ok'>[PASS]</span>", delay: 50 },
            { log: "Scanning Directory: <span class='text-module'>/src</span>", delay: 100 },
            { log: "├── <span class='text-file'>index.html</span> ............................................. <span class='text-ok'>[PASS]</span>", delay: 50 },
            { log: "├── <span class='text-file'>contact.html</span> ........................................... <span class='text-ok'>[PASS]</span>", delay: 50 },
            { log: "└── <span class='text-file'>about.html</span> ............................................. <span class='text-ok'>[PASS]</span>", delay: 50 },
            { log: "<span class='text-ok'>[ OK ]</span> File system check complete (32ms)", delay: 500 },

            // Phase 2: Compilation and Debug
            { cmd: "npm run build --mode=production", status: "Starting compilation..." },
            { log: "Compiling <span class='text-file'>typing-engine.js</span>...", delay: 50 },
            { log: "Compiling <span class='text-file'>tilt-card.js</span>...", delay: 50 },
            { log: "<span class='text-warn'>[WARNING]</span> Global var 'Dev' in user_profile.js. Ignoring.", delay: 300 },
            { log: "Compiling <span class='text-file'>main.css</span>...", delay: 50 },
            { log: "Compiling <span class='text-file'>tailwind.config.js</span>...", delay: 50 },
            { log: "Minifying bundle.js........................................ <span class='text-ok'>[DONE]</span>", delay: 150 },
            { log: "Optimizing images.......................................... <span class='text-ok'>[DONE]</span>", delay: 150 },
            { cmd: PROMPT_BUILD + "check_dependency_tree", status: "Verifying module integrity..." },
            { log: "Dependency <span class='text-module'>TailwindCSS</span> .................................. <span class='text-ok'>[PASS]</span>", delay: 100 },
            { log: "Dependency <span class='text-module'>RemixIcon</span> .................................... <span class='text-ok'>[PASS]</span>", delay: 100 },
            { log: "Dependency <span class='text-module'>GoogleFonts</span> .................................. <span class='text-ok'>[PASS]</span>", delay: 100 },

            // Phase 3: Resource Allocation & Launch
            { cmd: "resource map --host=vercel", status: "Mapping and allocating network resources..." },
            { log: PROMPT_MAPPER + "API Endpoint allocation: <span class='text-module'>0x01A</span>", delay: 150 },
            { log: PROMPT_MAPPER + "DB Connection status: <span class='text-ok'>ACTIVE</span>", delay: 150 },
            { log: PROMPT_MAPPER + "Load Balancer status: <span class='text-ok'>ACTIVE</span>", delay: 150 },
            { log: "<span class='text-ok'>[ SUCCESS ]</span> All resources allocated (15ms)", delay: 400 },
            { cmd: "system launch", status: "Executing final launch command..." },
            { log: "<br><span class='text-neonCyan font-bold'>SYSTEM INTERFACE READY.</span>", delay: 300, final: true }
        ];

        let seqIndex = 0;
        let launchReady = false;

        function scrollToBottom() {
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }

        async function executeSequence() {
            if (seqIndex >= sequence.length) {
                // Sequence finished, prompt user to press enter
                const finalPrompt = document.createElement('div');
                finalPrompt.innerHTML = PROMPT_ROOT + '<span class="text-neonCyan">Press ENTER to continue...</span><span id="final-cursor" class="cursor"></span>';
                terminalOutput.appendChild(finalPrompt);
                statusText.innerHTML = '<span class="text-neonCyan">System Ready. Awaiting user input...</span>';
                launchReady = true;
                scrollToBottom();
                return;
            }

            const current = sequence[seqIndex];

            if (current.cmd) {
                // Command line execution with typing effect
                const newLine = document.createElement('div');
                const promptHtml = current.cmd.startsWith('<span') ? current.cmd : PROMPT_ROOT + current.cmd;

                newLine.innerHTML = promptHtml + '<span id="typing-cursor" class="cursor"></span>';
                terminalOutput.appendChild(newLine);
                scrollToBottom();

                const commandText = current.cmd.startsWith('<span') ? current.cmd.split('></span>')[1] : current.cmd;
                const typingElement = newLine.querySelector('#typing-cursor');

                for (let i = 0; i <= commandText.length; i++) {
                    await new Promise(r => setTimeout(r, 15)); // Typing speed
                    typingElement.innerHTML = commandText.substring(0, i);
                }

                typingElement.classList.remove('cursor');
                typingElement.id = ''; // Remove ID for next line

                const statusLine = document.createElement('div');
                statusLine.innerHTML = `<span class="text-gray-500">//</span> ${current.status}`;
                terminalOutput.appendChild(statusLine);

                await new Promise(r => setTimeout(r, 400)); // Delay after command completes

            } else if (current.log) {
                // Simple log message (instant display)
                const newLine = document.createElement('div');
                newLine.innerHTML = current.log;
                terminalOutput.appendChild(newLine);
                await new Promise(r => setTimeout(r, current.delay || 150));
            }

            seqIndex++;
            scrollToBottom();
            executeSequence(); // Move to next item
        }

        // Final Event Listener: Redirect on Enter Key
        document.addEventListener('keydown', (e) => {
            if (launchReady && e.key === 'Enter') {
                document.getElementById('final-cursor').style.display = 'none';
                statusText.innerText = 'Redirecting to index.html...';
                window.location.href = 'index.html';
            }
        });

        // Mousemove listener for background grid spotlight
        window.addEventListener('mousemove', (e) => {
            if (grid) {
                grid.style.setProperty('--x', `${e.clientX}px`);
                grid.style.setProperty('--y', `${e.clientY}px`);
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            // Start the sequence after a slight delay
            setTimeout(executeSequence, 500);
        });
    </script>
</body>

</html>